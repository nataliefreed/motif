var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequire93f4;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},e.parcelRequire93f4=n),n.register("kQXSw",(function(e,t){var a,n,o,r;function i(e){var t={};if(e.modules)for(var a=0;a<e.modules.length;a++)i.loadModule(e.modules[a]);return i.Actor.call(t,e),i.initReferences(t),null==t.previewActions&&(t.previewActions=!0),null==t.previewNumbers&&(t.previewNumbers=!0),t.activePreview=null,t.canPreview=function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),t["preview"+e]&&!t.activePreview},t.createWidget(),t.container&&("string"==typeof t.container&&(t.container=document.body.querySelector(t.container)),t.container.appendChild(t.dom)),i.ui.init(t),i.modal.init(t),t.onupdate=t.onupdate||function(e){},t.update=function(){var e={actor:t,data:{}};t.children.forEach((function(t){var a=t.dataID;if(a){var n=t.get();e.data[a]=n}})),t.children.forEach((function(t){t.id&&(e[t.id]=t)})),t.onupdate(e)},t.update(),t}a=e.exports,n="default",o=()=>_,r=e=>_=e,Object.defineProperty(a,n,{get:o,set:r,enumerable:!0,configurable:!0}),i.Actor=function(e,t,a){var n=this;if(n._class_="Actor",n.options=e,n.parent=t,n.top=n.parent?n.parent.top:n,n.type=e.type,n.type){var o=i.getTemplateByType(n.type);c(n,o)}if(c(n,n.options),n.children=[],n.addChild=function(e,t){return"Actor"!=e._class_&&(e=new i.Actor(e,n,t)),n.children.push(e),e.id&&(n[e.id]=e),e},n.removeChild=function(e){s(n.children,e),e.kill()},n.update=function(){n.onupdate&&n.onupdate(n),n.parent&&n.parent.update()},n.onkill=n.onkill||function(){},n.kill=function(){for(n.dom&&n.dom.parentNode&&n.dom.parentNode.removeChild(n.dom),unwatch(n.data,u);n.children.length>0;)n.removeChild(n.children[0]);n.onkill(n)},void 0===n.placeholder&&(n.placeholder={}),"function"==typeof n.placeholder&&(n.placeholder=n.placeholder()),("object"!=typeof n.placeholder||Array.isArray(n.placeholder))&&(n.placeholder={value:l(n.placeholder)}),n.placeholder.type||(n.placeholder.type=n.type),n.data=n.data||a,!n.data){t=n.parent;var r=n.dataID;t&&r?(t.data[r]||(t.data[r]=l(n.placeholder)),n.data=t.data[r]):n.data=l(n.placeholder)}n.getData=function(e){return n.data[e]},n.setData=function(e,t,a){d=!0,void 0===t?delete n.data[e]:n.data[e]=t,setTimeout((function(){d=!1}),1),a||n.update()},n.switchData=function(e){unwatch(n.data,u),n.data=e,watch(n.data,u),n.onDataChange&&n.onDataChange(e)};var d=!1,u=function(e,t,a,o){d||n.onDataChange&&n.onDataChange()};watch(n.data,u),n.dom=null,n.initWidget=n.initWidget||function(){n.dom=document.createElement("span"),n.dom.innerHTML="[todo: '"+n.type+"' widget]"},n.createWidget=function(){return n.initWidget(n),n.dom},n.previewData=null,n.onact=n.onact||function(){},n.act=function(e,t){var a;return a=t?l(t):n.previewData?l(n.previewData):l(n.data),n.children.forEach((function(t){var n=t.dataID;if(n){var o=t.get(e);a[n]=o}})),n.onact({actor:n,target:e,data:a})},n.onget=n.onget||function(){},n.get=function(e){var t=n.previewData?n.previewData:n.data;return t=l(t),n.onget({actor:n,target:e,data:t})},n.init&&("string"==typeof n.init&&i.initializeWithString(n,n.init),"function"==typeof n.init&&n.init(n))},i.templates=[],i.add=function(e){i.templates.push(e)},i.getTemplateByType=function(e){var t=i.templates.find((function(t){return t.type==e}));if(!t)throw Error("No actor template of type '"+e+"'!");return t},i.getTemplatesByTag=function(e){return i.templates.filter((function(t){return t.tags.indexOf(e)>=0}))},i.modify=function(){var e,t,a;2==arguments.length?(e=arguments[0],a=arguments[1]):(e=arguments[0],t=arguments[1],a=arguments[2]);var n={},o=i.getTemplateByType(e);c(n,o);var r=a(o);c(n,r),t?o.type=t:s(i.templates,o),i.add(n)},i.initializeWithString=function(e,t){for(var a=[],n=t,o=-1,r=-1,i=0,l=0;l<n.length;l++){var c=n[l];if(0==i&&"{"==c&&(o=l),"{"==c&&i++,"}"==c&&i--,0==i&&"}"==c){r=l+1;var s=n.slice(o,r);s=(s=s.replace(/(\w+)\:/g,"'$1':")).replace(/\'/g,'"'),(s=JSON.parse(s)).dataID=s.dataID||s.id,a.push(s),n=n.substr(0,o)+"<span id='widget_"+s.id+"'></span>"+n.substr(r),l=0,o=-1,r=-1,i=0}}a.forEach((function(t){e.addChild(t)})),e.createWidget=function(){return e.dom=document.createElement("span"),e.dom.innerHTML=n,e.children.forEach((function(t){t.createWidget();var a="#widget_"+t.id,n=e.dom.querySelector(a);e.dom.replaceChild(t.dom,n)})),e.dom}},i.modules={},i.module=function(e,t){i.modules[e]=t},i.loadModule=function(e){var t=i.modules[e];if(!t)throw Error("There's no module called '"+e+"'!");t()},i.initReferences=function(e){var t=e.top.data;for(var a in t._references||(t._references={}),t._references){t._references[a].connected=0}},i.createReference=function(e,t,a){var n=e.top.data,o={id:f(n._references),tags:v(t),data:a,connected:0};return n._references[o.id]=o,o},i.getReferenceById=function(e,t){return e.top.data._references[t]},i.getReferencesByTag=function(e,t){var a=e.top.data,n=[];for(var o in a._references){var r=a._references[o];r.tags.indexOf(t)>=0&&n.push(r)}return n},i.connectReference=function(e,t){i.getReferenceById(e,t).connected++},i.disconnectReference=function(e,t){var a=i.getReferenceById(e,t);a.connected--,0==a.connected&&i.deleteReference(e,t)},i.deleteReference=function(e,t){var a=e.top.data;a._references[t];delete a._references[t]},i.saveToURL=function(e){var t=JSON.stringify(e),a=x.compressToEncodedURIComponent(t);return window.location.origin+window.location.pathname+"?data="+a},i.loadFromURL=function(){var e=m("data"),t=x.decompressFromEncodedURIComponent(e);return t?JSON.parse(t):null},Math.TAU=2*Math.PI;var l=function(e){return JSON.parse(JSON.stringify(e))},c=function(e,t){for(var a in t){var n=t[a];e[a]=n}},s=function(e,t){var a=e.indexOf(t);return!(a<0)&&(e.splice(a,1),!0)},d=function(e){e.addEventListener("paste",(function(e){if(e.preventDefault(),e.clipboardData&&e.clipboardData.getData){var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}else if(window.clipboardData&&window.clipboardData.getData){!function(e){var t,a;window.getSelection?(t=window.getSelection()).getRangeAt&&t.rangeCount&&((a=t.getRangeAt(0)).deleteContents(),a.insertNode(document.createTextNode(e))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=e)}(t=window.clipboardData.getData("Text"))}}))},u=function(e,t){var a=document.createRange();a.selectNodeContents(e),t&&a.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(a)},p=function(){window.getSelection().removeAllRanges()},h=function(e){""==e.innerText&&(e.innerHTML="&nbsp;",u(e)),e.innerHTML.search("<br>")>=0&&(e.innerHTML=e.innerHTML.replace(/(\<br\>)+/g,"&nbsp;"),u(e,!0))},f=function(e){var t,a=0;do{t="id"+a,a++}while(e[t]);return t},v=function(e){return Array.isArray(e)?e:[e]},m=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null};function g(e,t,a){var n,o,r,i,l,c,s,d;switch(1===arguments.length&&(t=e.s,a=e.v,e=e.h),c=a*(1-t),s=a*(1-(l=6*(e/=360)-(i=Math.floor(6*e)))*t),d=a*(1-(1-l)*t),i%6){case 0:n=a,o=d,r=c;break;case 1:n=s,o=a,r=c;break;case 2:n=c,o=a,r=d;break;case 3:n=c,o=s,r=a;break;case 4:n=d,o=c,r=a;break;case 5:n=a,o=c,r=s}return[Math.round(255*n),Math.round(255*o),Math.round(255*r)]}function y(e,t,a){1===arguments.length&&(t=e[1],a=e[2],e=e[0]);var n=g(e,t,a);return"rgb("+n[0]+","+n[1]+","+n[2]+")"}var b=0,w=[[0,.6,1],[30,.8,1],[210,.8,1],[260,.7,1],[310,.6,1]];e.exports=function(){function e(){E=null;for(var e=0;e<C.length;e++)C[e]();C.length=0}var t={noMore:!1,useDirtyCheck:!1},a=[],n=[],o=[],r=!1;try{r=Object.defineProperty&&Object.defineProperty({},"x",{})}catch(e){}var i=function(e){return e&&"[object Function]"=={}.toString.call(e)},l=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"[object Object]"==={}.toString.apply(e)},s=function(e,t){var a=[],n=[];if("string"!=typeof e&&"string"!=typeof t){if(l(e)&&t)for(var o=0;o<e.length;o++)void 0===t[o]&&a.push(o);else for(var o in e)e.hasOwnProperty(o)&&t&&void 0===t[o]&&a.push(o);if(l(t)&&e)for(var r=0;r<t.length;r++)void 0===e[r]&&n.push(r);else for(var r in t)t.hasOwnProperty(r)&&e&&void 0===e[r]&&n.push(r)}return{added:a,removed:n}},d=function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var a in e)t[a]=e[a];return t},u=function(e,t,a,n){try{Object.observe(e,(function(e){e.forEach((function(e){e.name===t&&n(e.object[e.name])}))}))}catch(o){try{Object.defineProperty(e,t,{get:a,set:function(e){n.call(this,e,!0)},enumerable:!0,configurable:!0})}catch(o){try{Object.prototype.__defineGetter__.call(e,t,a),Object.prototype.__defineSetter__.call(e,t,(function(e){n.call(this,e,!0)}))}catch(a){h(e,t,n)}}}},p=function(e,t,a){try{Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!1,value:a})}catch(n){e[t]=a}},h=function(e,t,a){n[n.length]={prop:t,object:e,orig:d(e[t]),callback:a}},f=function(){i(arguments[1])?v.apply(this,arguments):l(arguments[1])?m.apply(this,arguments):g.apply(this,arguments)},v=function(e,t,a,n){if("string"!=typeof e&&(e instanceof Object||l(e))){if(l(e)){if(T(e,"__watchall__",t,a),void 0===a||a>0)for(var o=0;o<e.length;o++)v(e[o],t,a,n)}else{var i=[];for(o in e)"$val"==o||!r&&"watchers"===o||Object.prototype.hasOwnProperty.call(e,o)&&i.push(o);m(e,i,t,a,n)}n&&X(e,"$$watchlengthsubjectroot",t,a)}},m=function(e,t,a,n,o){if("string"!=typeof e&&(e instanceof Object||l(e)))for(var r=0;r<t.length;r++){var i=t[r];g(e,i,a,n,o)}},g=function(e,t,a,n,o){"string"!=typeof e&&(e instanceof Object||l(e))&&(i(e[t])||(null!=e[t]&&(void 0===n||n>0)&&v(e[t],a,void 0!==n?n-1:n),T(e,t,a,n),o&&(void 0===n||n>0)&&X(e,t,a,n)))},y=function(){i(arguments[1])?b.apply(this,arguments):l(arguments[1])?w.apply(this,arguments):M.apply(this,arguments)},b=function(e,t){if(!(e instanceof String)&&(e instanceof Object||l(e)))if(l(e)){for(var a=["__watchall__"],n=0;n<e.length;n++)a.push(n);w(e,a,t)}else{var o=function(e){var a=[];for(var n in e)e.hasOwnProperty(n)&&(e[n]instanceof Object?o(e[n]):a.push(n));w(e,a,t)};o(e)}},w=function(e,t,a){for(var n in t)t.hasOwnProperty(n)&&M(e,t[n],a)},C=[],E=null,x=function(){return E||(E=setTimeout(e)),E},_=function(e){null==E&&x(),C[C.length]=e},k=function(){(i(arguments[2])?A:D).apply(this,arguments)},D=function(e,t,a,n){var o=null,r=-1,i=l(e);v(e,(function(a,n,l,c){var s=x();if(r!==s&&(r=s,(o={type:"update"}).value=e,o.splices=null,_((function(){t.call(this,o),o=null}))),i&&e===this&&null!==o){if("pop"===n||"shift"===n)l=[],c=[c];else if("push"===n||"unshift"===n)l=[l],c=[];else if("splice"!==n)return;o.splices||(o.splices=[]),o.splices[o.splices.length]={index:a,deleteCount:c?c.length:0,addedCount:l?l.length:0,added:l,deleted:c}}}),1==a?void 0:0,n)},A=function(e,t,a,n,o){e&&t&&(g(e,t,(function(e,t,r,i){var s={type:"update"};s.value=r,s.oldvalue=i,(n&&c(r)||l(r))&&D(r,a,n,o),a.call(this,s)}),0),(n&&c(e[t])||l(e[t]))&&D(e[t],a,n,o))},T=function(e,a,n,o){var r=!1,i=l(e);e.watchers||(p(e,"watchers",{}),i&&I(e,(function(t,n,r,i){if(B(e,t,n,r,i),0!==o&&r&&(c(r)||l(r))){var s,d,u,p,h=e.watchers[a];for((p=e.watchers.__watchall__)&&(h=h?h.concat(p):p),u=h?h.length:0,s=0;s<u;s++)if("splice"!==n)v(r,h[s],void 0===o?o:o-1);else for(d=0;d<r.length;d++)v(r[d],h[s],void 0===o?o:o-1)}}))),e.watchers[a]||(e.watchers[a]=[],i||(r=!0));for(var s=0;s<e.watchers[a].length;s++)if(e.watchers[a][s]===n)return;if(e.watchers[a].push(n),r){var d=e[a],f=function(){return d},m=function(n,r){var i=d;if(d=n,0!==o&&e[a]&&(c(e[a])||l(e[a]))&&!e[a].watchers){var s,u=e.watchers[a].length;for(s=0;s<u;s++)v(e[a],e.watchers[a][s],void 0===o?o:o-1)}return P(e,a)?void O(e,a):void(t.noMore||i!==n&&(r?B(e,a,"set",n,i):j(e,a,"set",n,i),t.noMore=!1))};t.useDirtyCheck?h(e,a,m):u(e,a,f,m)}},j=function(e,t,a,n,o){if(void 0!==t){var r,i,l=e.watchers[t];(i=e.watchers.__watchall__)&&(l=l?l.concat(i):i),r=l?l.length:0;for(var c=0;c<r;c++)l[c].call(e,t,a,n,o)}else for(var t in e)e.hasOwnProperty(t)&&j(e,t,a,n,o)},S=["pop","push","reverse","shift","sort","slice","unshift","splice"],L=function(e,t,a,n){p(e,a,(function(){var o,r,i,l,c=0;if("splice"===a){var s=arguments[0],d=s+arguments[1];for(i=e.slice(s,d),r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];c=s}else r=arguments.length>0?arguments[0]:void 0;return l=t.apply(e,arguments),"slice"!==a&&("pop"===a?(i=l,c=e.length):"push"===a?c=e.length-1:"shift"===a?i=l:"unshift"!==a&&void 0===r&&(r=l),n.call(e,c,a,r,i)),l}))},I=function(e,t){if(i(t)&&e&&!(e instanceof String)&&l(e))for(var a,n=S.length;n--;)a=S[n],L(e,e[a],a,t)},M=function(e,t,a){if(t){if(e.watchers[t])if(void 0===a)delete e.watchers[t];else for(var n=0;n<e.watchers[t].length;n++)e.watchers[t][n]==a&&e.watchers[t].splice(n,1)}else delete e.watchers;V(e,t,a),H(e,t)},N=function(e,t){if(e.watchers){var a="__wjs_suspend__"+(void 0!==t?t:"");e.watchers[a]=!0}},P=function(e,t){return e.watchers&&(e.watchers.__wjs_suspend__||e.watchers["__wjs_suspend__"+t])},O=function(e,t){_((function(){delete e.watchers.__wjs_suspend__,delete e.watchers["__wjs_suspend__"+t]}))},R=null,B=function(e,t,a,n,r){o[o.length]={obj:e,prop:t,mode:a,newval:n,oldval:r},null===R&&(R=setTimeout(W))},W=function(){var e=null;R=null;for(var t=0;t<o.length;t++)e=o[t],j(e.obj,e.prop,e.mode,e.newval,e.oldval);e&&(o=[],e=null)},F=function(){for(var e=0;e<a.length;e++){var t=a[e];if("$$watchlengthsubjectroot"===t.prop)((o=s(t.obj,t.actual)).added.length||o.removed.length)&&(o.added.length&&m(t.obj,o.added,t.watcher,t.level-1,!0),t.watcher.call(t.obj,"root","differentattr",o,t.actual)),t.actual=d(t.obj);else{var o;if((o=s(t.obj[t.prop],t.actual)).added.length||o.removed.length){if(o.added.length)for(var r=0;r<t.obj.watchers[t.prop].length;r++)m(t.obj[t.prop],o.added,t.obj.watchers[t.prop][r],t.level-1,!0);j(t.obj,t.prop,"differentattr",o,t.actual)}t.actual=d(t.obj[t.prop])}}var i,l;if(n.length>0)for(e=0;e<n.length;e++)l=(i=n[e]).object[i.prop],U(i.orig,l)||(i.orig=d(l),i.callback(l))},U=function(e,t){var a,n=!0;if(e!==t)if(c(e)){for(a in e)if((r||"watchers"!==a)&&e[a]!==t[a]){n=!1;break}}else n=!1;return n},X=function(e,t,n,o){var r;r=d("$$watchlengthsubjectroot"===t?e:e[t]),a.push({obj:e,prop:t,actual:r,watcher:n,level:o})},V=function(e,t,n){for(var o=0;o<a.length;o++){var r=a[o];r.obj==e&&(t&&r.prop!=t||n&&r.watcher!=n||a.splice(o--,1))}},H=function(e,t){for(var a=0;a<n.length;a++){var o=n[a],r=o.object.watchers;o.object==e&&(!t||o.prop==t)&&r&&(!t||!r[t]||0==r[t].length)&&n.splice(a--,1)}};return setInterval(F,50),t.watch=f,t.unwatch=y,t.callWatchers=j,t.suspend=N,t.onChange=k,t}();var C,E,x=function(){function e(e,t){if(!o[e]){o[e]={};for(var a=0;a<e.length;a++)o[e][e.charAt(a)]=a}return o[e][t]}var t=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={},r={compressToBase64:function(e){if(null==e)return"";var t=r._compress(e,6,(function(e){return a.charAt(e)}));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,(function(n){return e(a,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":r._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:r._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=r.compress(e),a=new Uint8Array(2*t.length),n=0,o=t.length;o>n;n++){var i=t.charCodeAt(n);a[2*n]=i>>>8,a[2*n+1]=i%256}return a},decompressFromUint8Array:function(e){if(null==e)return r.decompress(e);for(var a=new Array(e.length/2),n=0,o=a.length;o>n;n++)a[n]=256*e[2*n]+e[2*n+1];var i=[];return a.forEach((function(e){i.push(t(e))})),r.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,(function(a){return e(n,t.charAt(a))})))},compress:function(e){return r._compress(e,16,(function(e){return t(e)}))},_compress:function(e,t,a){if(null==e)return"";var n,o,r,i={},l={},c="",s="",d="",u=2,p=3,h=2,f=[],v=0,m=0;for(r=0;r<e.length;r+=1)if(c=e.charAt(r),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=p++,l[c]=!0),s=d+c,Object.prototype.hasOwnProperty.call(i,s))d=s;else{if(Object.prototype.hasOwnProperty.call(l,d)){if(d.charCodeAt(0)<256){for(n=0;h>n;n++)v<<=1,m==t-1?(m=0,f.push(a(v)),v=0):m++;for(o=d.charCodeAt(0),n=0;8>n;n++)v=v<<1|1&o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o>>=1}else{for(o=1,n=0;h>n;n++)v=v<<1|o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o=0;for(o=d.charCodeAt(0),n=0;16>n;n++)v=v<<1|1&o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o>>=1}0==--u&&(u=Math.pow(2,h),h++),delete l[d]}else for(o=i[d],n=0;h>n;n++)v=v<<1|1&o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o>>=1;0==--u&&(u=Math.pow(2,h),h++),i[s]=p++,d=String(c)}if(""!==d){if(Object.prototype.hasOwnProperty.call(l,d)){if(d.charCodeAt(0)<256){for(n=0;h>n;n++)v<<=1,m==t-1?(m=0,f.push(a(v)),v=0):m++;for(o=d.charCodeAt(0),n=0;8>n;n++)v=v<<1|1&o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o>>=1}else{for(o=1,n=0;h>n;n++)v=v<<1|o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o=0;for(o=d.charCodeAt(0),n=0;16>n;n++)v=v<<1|1&o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o>>=1}0==--u&&(u=Math.pow(2,h),h++),delete l[d]}else for(o=i[d],n=0;h>n;n++)v=v<<1|1&o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o>>=1;0==--u&&(u=Math.pow(2,h),h++)}for(o=2,n=0;h>n;n++)v=v<<1|1&o,m==t-1?(m=0,f.push(a(v)),v=0):m++,o>>=1;for(;;){if(v<<=1,m==t-1){f.push(a(v));break}m++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(e,a,n){var o,r,i,l,c,s,d,u=[],p=4,h=4,f=3,v="",m=[],g={val:n(0),position:a,index:1};for(o=0;3>o;o+=1)u[o]=o;for(i=0,c=Math.pow(2,2),s=1;s!=c;)l=g.val&g.position,g.position>>=1,0==g.position&&(g.position=a,g.val=n(g.index++)),i|=(l>0?1:0)*s,s<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),s=1;s!=c;)l=g.val&g.position,g.position>>=1,0==g.position&&(g.position=a,g.val=n(g.index++)),i|=(l>0?1:0)*s,s<<=1;d=t(i);break;case 1:for(i=0,c=Math.pow(2,16),s=1;s!=c;)l=g.val&g.position,g.position>>=1,0==g.position&&(g.position=a,g.val=n(g.index++)),i|=(l>0?1:0)*s,s<<=1;d=t(i);break;case 2:return""}for(u[3]=d,r=d,m.push(d);;){if(g.index>e)return"";for(i=0,c=Math.pow(2,f),s=1;s!=c;)l=g.val&g.position,g.position>>=1,0==g.position&&(g.position=a,g.val=n(g.index++)),i|=(l>0?1:0)*s,s<<=1;switch(d=i){case 0:for(i=0,c=Math.pow(2,8),s=1;s!=c;)l=g.val&g.position,g.position>>=1,0==g.position&&(g.position=a,g.val=n(g.index++)),i|=(l>0?1:0)*s,s<<=1;u[h++]=t(i),d=h-1,p--;break;case 1:for(i=0,c=Math.pow(2,16),s=1;s!=c;)l=g.val&g.position,g.position>>=1,0==g.position&&(g.position=a,g.val=n(g.index++)),i|=(l>0?1:0)*s,s<<=1;u[h++]=t(i),d=h-1,p--;break;case 2:return m.join("")}if(0==p&&(p=Math.pow(2,f),f++),u[d])v=u[d];else{if(d!==h)return null;v=r+r.charAt(0)}m.push(v),u[h++]=r+v.charAt(0),r=v,0==--p&&(p=Math.pow(2,f),f++)}}};return r}();"function"==typeof define&&define.amd?define((function(){return x})):null!=e&&(e.exports=x),C={},i.ui=C,C.init=function(e){e.dom.classList.add("joy-master"),e.container.addEventListener("wheel",(function(t){var a=t.deltaY;return e.container.scrollTop+=a,t.preventDefault(),!1})),document.body.addEventListener("keydown",(function(e){if(8===e.keyCode){var t=!0,a=e.srcElement||e.target;if(!a.getAttribute("readonly")&&!a.getAttribute("disabled"))if(a.isContentEditable)t=!1;else if("INPUT"==a.tagName.toUpperCase()){var n=a.getAttribute("type");n&&(n=n.toLowerCase()),["text","password","file","search","email","number","date","color","datetime","datetime-local","month","range","search","tel","time","url","week"].indexOf(n)>-1&&(t=!1)}else"TEXTAREA"==a.tagName.toUpperCase()&&(t=!1);if(t)return e.preventDefault(),!1}}))},C.Button=function(e){var t=this,a=document.createElement("div");a.className="joy-button",t.dom=a,e.label=e.label||"",t.label=document.createElement("span"),a.appendChild(t.label),t.setLabel=function(e){t.label.innerHTML=e},t.setLabel(e.label),a.onclick=function(){e.onclick()},t.styles=e.styles||[];for(var n=0;n<t.styles.length;n++)a.classList.add(t.styles[n])},C.ChooserButton=function(e){var t=this;t.value=e.value,t.options=e.options,t.onchange=e.onchange,t.value||(t.value=t.options[0].value),C.Button.call(t,{label:void 0===e.staticLabel?"":e.staticLabel,onclick:function(){i.modal.Chooser({source:t.dom,options:t.options,onchange:function(e){t.value=e,a(),t.onchange(e)},position:e.position})},styles:e.styles});var a=function(){if(void 0===e.staticLabel){var a=t.options.find((function(e){return e.value==t.value})).label;t.setLabel(a)}};a()},C.Scrubber=function(e){var t=this,a=e.min,n=e.max;t.value=e.value;var o=document.createElement("div");o.className="joy-scrubber",t.dom=o,t.setLabel=function(e){o.innerHTML=e.toFixed(t.sigfigs)};var r,i,l=function(a){a=parseFloat(a.toFixed(t.sigfigs)),e.onchange(a)},c=!1,s=!1,f=0,v=function(a){c=!0,r=a.clientX,i=t.value,f=0,e.onstart&&e.onstart()},m=function(e){if(c){s=!0;var a=Math.pow(.1,t.sigfigs);a=parseFloat(a.toPrecision(1));var n=e.clientX-r;r=e.clientX;var o=Math.abs(n/10);o<1&&(o=1),o>3&&(o=3),f+=n*o;var d=Math.floor(f/2),u=i+d*a;u=g(u),t.value!=u&&(t.value=u,t.setLabel(u),l(u))}},g=function(e){return void 0!==a&&e<a&&(e=a),void 0!==n&&e>n&&(e=n),e},y=function(){c=!1,e.onstop&&e.onstop(),setTimeout((function(){s=!1}),1)};o.addEventListener("mousedown",v),window.addEventListener("mousemove",m),window.addEventListener("mouseup",y),t.kill=function(){o.removeEventListener("mousedown",v),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y)};var b,w=!1;o.onblur=function(){w&&(w=!1,o.contentEditable=!1,p(),E(o.innerText),t.value=C(),t.setLabel(t.value),l(t.value),e.onstop&&e.onstop())},d(o),(b=o).addEventListener("keypress",(function(e){13===e.which&&(e.preventDefault(),b.blur())})),o.onclick=function(){s||(w=!0,o.contentEditable=!0,o.spellcheck=!1,u(o),e.onstart&&e.onstart())},o.oninput=function(e){if(w){var t=/[^0-9.\-]/g;o.innerText.match(t)&&(o.innerText=o.innerText.replace(t,"")),h(o),l(C())}};var C=function(){var e=parseFloat(o.innerText);return isNaN(e)&&(e=0),e=g(e)};t.sigfigs=0;var E=function(e){var a,n=(e=e.toString()).search(/\./);a=n>=0?e.length-1-n:0,t.sigfigs=a};E(t.value),t.setLabel(t.value)},C.String=function(e){var t=this,a=document.createElement("div");a.className="joy-string",t.dom=a;var n=document.createElement("span");n.contentEditable=!0,n.spellcheck=!1;var o=document.createElement("span"),r=document.createElement("span");o.innerHTML=e.prefix||"",r.innerHTML=e.suffix||"",a.appendChild(o),a.appendChild(n),a.appendChild(r),n.oninput=function(t){h(n);var a=n.innerText;e.onchange(a)},n.onfocus=function(){u(n)},n.onblur=function(){p()},d(n),n.onkeypress=function(e){return 13!=e.which||(n.blur(),!1)},t.setString=function(e){n.innerText=e,h(n)},t.setColor=function(e){e=function(e){return Array.isArray(e)&&(e=y(e[0],e[1],e[2])),e}(e),a.style.color=e,a.style.borderColor=e},e.color&&t.setColor(e.color),t.styles=e.styles||[];for(var i=0;i<t.styles.length;i++)a.classList.add(t.styles[i]);t.setString(e.value)},C.TextBox=function(e){var t,a=this;e.multiline?t=document.createElement("textarea"):(t=document.createElement("input")).type="text",e.placeholder&&(t.placeholder=e.placeholder),t.spellcheck=!1,t.className="joy-textbox",a.dom=t;var n=a.dom;e.readonly?(t.setAttribute("readonly",1),t.addEventListener("click",(function(){a.select()}))):t.oninput=function(a){e.onchange(t.value)},e.width&&(t.style.width="number"==typeof e.width?e.width+"px":e.width),a.getValue=function(){return t.value},a.setValue=function(e){t.value=e},a.select=function(){t.select()},a.styles=e.styles||[];for(var o=0;o<a.styles.length;o++)n.classList.add(a.styles[o]);e.value&&a.setValue(e.value),e.multiline&&(n.addEventListener("input",(function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}),!1),setTimeout((function(){n.setAttribute("style","height:"+n.scrollHeight+"px; overflow-y:hidden;")}),1))},E={},i.modal=E,E.init=function(e){E.dom=document.createElement("div"),E.dom.id="joy-modal",document.body.appendChild(E.dom),E.bg=document.createElement("div"),E.bg.id="joy-bg",E.bg.onclick=function(){E.currentUI.kill()},E.dom.appendChild(E.bg),E.box=document.createElement("div"),E.box.id="joy-box",E.box.className="arrow_box",E.dom.appendChild(E.box),E.dom.addEventListener("wheel",(function(e){return e.preventDefault(),!1}))},E.show=function(e){E.dom.style.display="block",E.currentUI=e,E.box.appendChild(e.dom);var t=e.config.position||"below",a=E.box.getBoundingClientRect(),n=e.config.source.getBoundingClientRect();switch("below"==t&&(r=n.top+n.height+20)+a.height>document.body.clientHeight&&(t="left"),E.box.setAttribute("position",t),t){case"below":var o=n.left+n.width/2,r=n.top+n.height+20;o-=a.width/2;break;case"left":o=n.left-20,r=n.top+n.height/2,o-=a.width,r-=a.height/2}E.box.style.left=o+"px",E.box.style.top=r+"px",E.currentUI.config.onopen&&E.currentUI.config.onopen()},E.hide=function(){!function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}(E.box),E.dom.style.display="none",E.currentUI.config.onclose&&E.currentUI.config.onclose()},E.Chooser=function(e){var t={};t.config=e;var a=document.createElement("div");a.className="joy-modal-chooser",t.dom=a;var n=document.createElement("div");a.appendChild(n),t.options=[],t.categories={};var o="_placeholder_",r=function(e){var a=document.createElement("div");n.appendChild(a),t.categories[e]=a};t.populate=function(){for(var a=0;a<e.options.length;a++)(l=(n=e.options[a]).category)?t.categories[l]||r(l):t.categories._placeholder_||r(o);for(a=0;a<e.options.length;a++){var n=e.options[a],i=document.createElement("div");i.innerHTML=n.label,n.color&&(i.style.color=n.color);var l=n.category||o;t.categories[l].appendChild(i),function(e){i.onclick=function(a){t.onchange(e.value),a.stopPropagation()}}(n)}},t.populate(),t.onchange=function(a){t.kill(),e.onchange(a)},t.kill=function(){E.hide()},E.show(t)},E.Color=function(e){var t={};t.config=e;var a=document.createElement("div");a.className="joy-modal-color",t.dom=a,e.value=e.value||[0,1,1],t.h=e.value[0],t.s=e.value[1],t.v=e.value[2],t.dom.style.width="195px",t.dom.style.height="170px";var n=document.createElement("canvas");n.id="joy-color-wheel";var o=n.getContext("2d");n.width=300,n.height=300,n.style.width=n.width/2+"px",n.style.height=n.height/2+"px",a.appendChild(n),n.style.top="10px",n.style.left="10px";var r=function(){var e=o;e.clearRect(0,0,e.canvas.width,e.canvas.height);for(var a=n.width,r=n.height,i=e.createImageData(a,r),l=i.data,c=a/2,s=r/2,d=a/2,u=d+2,p=0;p<a;p++)for(var h=0;h<r;h++){var f=p-c,v=h-s,m=Math.sqrt(f*f+v*v);if(m<u){m>=d&&(m=d);var y=Math.atan2(v,f),b=g(y=360*(y/Math.TAU+.5),m/=d,t.v),w=4*(p+h*a);l[w]=b[0],l[w+1]=b[1],l[w+2]=b[2],l[w+3]=255}}e.putImageData(i,0,0),e.save(),e.globalCompositeOperation="destination-in",e.beginPath(),e.fillStyle="#fff",e.arc(c,s,d,0,Math.TAU),e.fill(),e.restore()};r();var i=document.createElement("canvas");i.id="joy-color-value";var l=i.getContext("2d");i.width=30,i.height=300,i.style.width=i.width/2+"px",i.style.height=i.height/2+"px",a.appendChild(i),i.style.top="10px",i.style.right="10px";var c=function(){var e=l;e.clearRect(0,0,e.canvas.width,e.canvas.height);for(var a=i.width,n=i.height,o=e.createImageData(a,n),r=o.data,c=0;c<a;c++)for(var s=0;s<n;s++){var d=g(t.h,t.s,1-s/n),u=4*(c+s*a);r[u]=d[0],r[u+1]=d[1],r[u+2]=d[2],r[u+3]=255}e.putImageData(o,0,0)};c();var s=document.createElement("canvas");s.id="joy-color-picker";var d=s.getContext("2d");s.width=390,s.height=340,s.style.width=s.width/2+"px",s.style.height=s.height/2+"px",a.appendChild(s);var u,p=function(){var e,a,o=d;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.fillStyle=y(t.h,t.s,t.v),o.strokeStyle="#fff",o.lineWidth=2;var r=20+n.width/2,l=20+n.height/2,c=t.h*(Math.TAU/360),s=t.s*(n.width/2);e=r-Math.cos(c)*s,a=l-Math.sin(c)*s,o.beginPath(),o.arc(e,a,15,0,Math.TAU),o.fill(),o.stroke(),e=20+n.width+20+i.width/2,a=20+i.height*(1-t.v),o.beginPath(),o.arc(e,a,15,0,Math.TAU),o.fill(),o.stroke()};p();var h=!1,f=function(e){if(e.target==s){var t=2*e.offsetX,a=2*e.offsetY;"hs"==u?v(t-=20,a-=20):(t-=20+n.width+20,m(t,a-=20)),x()}},v=function(e,a){var o=n.width/2,r=e-o,i=a-o,l=Math.atan2(i,r),s=Math.sqrt(r*r+i*i);(l=360*(l/Math.TAU+.5))<0&&(l=0),l>360&&(l=360),(s/=o)<0&&(s=0),s>1&&(s=1),t.h=l,t.s=s,c(),p()},m=function(e,a){t.v=1-a/i.height,t.v<0&&(t.v=0),t.v>1&&(t.v=1),r(),p()},b=function(e){h=!0,u=2*e.offsetX<20+n.width+10?"hs":"v",f(e)},w=function(e){h&&f(e)},C=function(){h=!1};s.addEventListener("mousedown",b),window.addEventListener("mousemove",w),window.addEventListener("mouseup",C);var x=function(){var a=[t.h,t.s,t.v];a[0]=parseFloat(a[0].toFixed(0)),a[1]=parseFloat(a[1].toFixed(2)),a[2]=parseFloat(a[2].toFixed(2)),e.onchange(a)};t.kill=function(){a.removeEventListener("mousedown",b),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",C),E.hide()},E.show(t)},i.add({type:"number",tags:["ui"],initWidget:function(e){var t=e.options,a=new i.ui.Scrubber({min:t.min,max:t.max,step:t.step,value:e.getData("value"),onstart:function(){e.top.activePreview=e},onstop:function(){e.top.activePreview=null},onchange:function(t){e.setData("value",t)}});e.dom=a.dom;var n=null;e.dom.onmouseenter=function(){if(e.top.canPreview("numbers")){e.previewData=l(e.data);var t=Math.abs(.05*e.data.value);0==t&&(t=1);var a=0;n=setInterval((function(){if(!e.top.canPreview("numbers"))return o();a+=Math.TAU/30/.25,e.previewData.value=e.data.value+Math.sin(a)*t,e.update(),a>Math.TAU&&o()}),1e3/30)}};var o=function(){n&&clearInterval(n),e.previewData=null,e.update()};e.dom.onmouseleave=o},onget:function(e){return e.data.value},placeholder:{value:3}}),i.add({type:"color",tags:["ui"],initWidget:function(e){var t=new i.ui.Button({label:"&nbsp;",onclick:function(){i.modal.Color({source:e.dom,value:e.getData("value"),onchange:function(t){e.setData("value",t),a()},onopen:function(){e.top.activePreview=e},onclose:function(){e.top.activePreview=null}})},styles:["joy-color"]});e.dom=t.dom;var a=function(){var a=e.getData("value");t.dom.style.background=y(a)};a();var n,o,r=null;e.dom.onmouseenter=function(){e.top.canPreview("numbers")&&(e.data.value[2],e.previewData=l(e.data),o=0,n=2/30*2,r=setInterval((function(){if(!e.top.canPreview("numbers"))return c();var t=e.previewData.value;t[2]+=n,t[2]>1&&(t[2]=1,n*=-1),t[2]<0&&(t[2]=0,n*=-1),e.update(),(o+=2/30)>=1&&c()}),1e3/30))};var c=function(){r&&clearInterval(r),e.previewData=null,e.update()};e.dom.onmouseleave=c},onget:function(e){return y(e.data.value)},placeholder:function(){return[Math.floor(360*Math.random()),.8,1]}}),i.add({type:"choose",tags:["ui"],initWidget:function(e){for(var t=e.data,a=e.options,n=0;n<a.length;n++){var o=a[n];void 0!==o.label&&void 0!==o.value||(a[n]={label:o.toString(),value:o})}var r=new i.ui.ChooserButton({value:t.value,options:a,onchange:function(a){t.value=a,e.update()},styles:e.styles});e.dom=r.dom},onget:function(e){return e.data.value}}),i.add({type:"string",tags:["ui"],initWidget:function(e){var t=e.options;e.stringUI=new i.ui.String({prefix:t.prefix,suffix:t.suffix,color:t.color,value:e.getData("value"),onchange:function(t){e.setData("value",t)}}),e.dom=e.stringUI.dom,e.onDataChange=function(){var t=e.getData("value");e.stringUI.setString(t)}},onget:function(e){return e.data.value},placeholder:"???"}),i.add({type:"save",tags:["ui"],initWidget:function(e){var t=document.createElement("div");t.className="joy-save",e.dom=t,e.saveButton=new i.ui.Button({label:"save:",onclick:function(){var t=i.saveToURL(e.top.data);e.url.setValue(t),e.url.select();t.length;e.info.innerHTML="P.S: you can shorten your link with <a href='http://tinyurl.com/' target='_blank'>TinyURL</a>!"}}),t.appendChild(e.saveButton.dom),e.url=new i.ui.TextBox({readonly:!0}),t.appendChild(e.url.dom),e.info=document.createElement("div"),e.info.id="joy-save-info",t.appendChild(e.info)}}),i.add({type:"actions",tags:["ui"],init:function(e){void 0!==e.resetVariables&&(e.data.resetVariables=e.resetVariables)},initWidget:function(e){var t=e.data.actions,a=document.createElement("div");a.className="joy-actions",e.dom=a;var n=document.createElement("list");n.id="joy-list",a.appendChild(n);var o=[{label:"Add action above",value:"action_above"},{label:"Add action below",value:"action_below"},{label:"Delete",value:"delete"}],r=function(a){var r=new i.ui.ChooserButton({position:"left",staticLabel:c(a),options:o,onchange:function(o){!function(a,o){var r=0;if("action_above"==o&&(r=-1),"action_below"==o&&(r=1),0!=r){var l=e.entries.indexOf(a);r>0&&(l+=1),i.modal.Chooser({position:"left",source:a.bullet.dom,options:f,onchange:function(t){h(t,l),e.update(),d()}})}"delete"==o&&(s(e.entries,a),s(t,a.actionData),e.removeChild(a.actor),n.removeChild(a.dom),e.update(),d())}(a,o)},styles:["joy-bullet"]});return r.dom.id="joy-bullet",r},c=function(t){for(var a,n=e.entries.indexOf(t)+1,o=0,r=e.parent;r;)"actions"==r.type&&o++,r=r.parent;switch(o%3){case 0:a=n;break;case 1:a=function(e){for(var t=0,a=1;e>=a;)t++,e-=a,a*=26;for(var n="",o=0;o<t;o++)n="abcdefghijklmnopqrstuvwxyz".charAt(e%26)+n,e=Math.floor(e/26);return n}(n);break;case 2:a=function(e){if(!+e)return NaN;for(var t=String(+e).split(""),a=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],n="",o=3;o--;)n=(a[+t.pop()+10*o]||"")+n;return(Array(+t.join("")+1).join("M")+n).toLowerCase()}(n)}return a},d=function(){for(var t=0;t<e.entries.length;t++){var a=e.entries[t],n=a.bullet,o=c(a);n.setLabel(o)}};e.entries=[];for(var u=function(t,o){var i={},c=document.createElement("div");void 0===o&&(o=e.entries.length),e.entries.splice(o,0,i),n.insertBefore(c,n.children[o]);var s=r(i),d=document.createElement("div");d.id="joy-bullet-container",c.appendChild(d),d.appendChild(s.dom);var u=e.addChild({type:t.type},t),p=u.createWidget();p.id="joy-widget",c.appendChild(p),i.dom=c,i.bullet=s,i.actor=u,i.widget=p,i.actionData=t;var h,f,v=function(t){var a=t.offsetY/s.dom.getBoundingClientRect().height;a<0&&(a=0),a>1&&(a=1),h._PREVIEW=a,e.update()};return d.onmouseenter=function(t){if(e.top.canPreview("actions")){e.top.activePreview=e,e.previewData=l(e.data);var n=e.entries.indexOf(i);h=e.previewData.actions[n],e.previewData.actions.splice(n+1,0,{STOP:!0}),v(t),f=document.createElement("style"),document.head.appendChild(f),f.sheet.insertRule(".joy-actions.joy-previewing > #joy-list > div:nth-child(n+"+(n+2)+") { opacity:0.1; }"),f.sheet.insertRule(".joy-actions.joy-previewing > div.joy-bullet { opacity:0.1; }"),a.classList.add("joy-previewing")}},d.onmousemove=function(t){e.previewData&&v(t)},d.onmouseleave=function(){e.previewData&&(e.previewData=null,e.top.activePreview=null,e.update(),document.head.removeChild(f),a.classList.remove("joy-previewing"))},i},p=0;p<t.length;p++)u(t[p]);var h=function(e,a,n={}){var o={type:e,...n};void 0===a?t.push(o):t.splice(a,0,o);u(o,a)};e.addAction=h;var f=[];if(e.onlyActions)for(p=0;p<e.onlyActions.length;p++){var v=e.onlyActions[p],m=i.getTemplateByType(v),g=m.tags.filter((function(e){return"action"!=e}))[0];f.push({label:m.name,value:v,category:g})}else{var y=i.getTemplatesByTag("action");for(p=0;p<y.length;p++){var b=y[p];g=b.tags.filter((function(e){return"action"!=e}))[0];f.push({label:b.name,value:b.type,category:g})}}var w=new i.ui.ChooserButton({staticLabel:"+",options:f,onchange:function(t){h(t),e.update()},styles:["joy-bullet"]});a.appendChild(w.dom)},onact:function(e){e.target._variables||(e.target._variables={}),e.data.resetVariables&&(e.target._variables={});for(var t=0;t<e.data.actions.length;t++){var a=e.data.actions[t];if(a.STOP)return"STOP";var n=e.actor.entries[t].actor.act(e.target,a);if("STOP"==n)return n}},placeholder:{actions:[],resetVariables:!0}}),i.module("instructions",(function(){i.add({name:"Repeat the following...",type:"instructions/repeat",tags:["instructions","action"],init:"Repeat the following {id:'count', type:'number', min:1, placeholder:3} times: {id:'actions', type:'actions', resetVariables:false}",onact:function(e){var t=1;void 0!==e.data._PREVIEW&&(t=e.data._PREVIEW);for(var a=Math.floor(e.data.count*t),n=0;n<a;n++){var o=e.actor.actions.act(e.target);if("STOP"==o)return o}}}),i.add({name:"// Write a note",type:"instructions/comment",tags:["instructions","action"],initWidget:function(e){e.dom=document.createElement("div"),e.box=new i.ui.TextBox({multiline:!0,placeholder:"// your notes here",value:e.getData("value"),onchange:function(t){e.setData("value",t)},styles:["box"]}),e.dom.appendChild(e.box.dom)}})})),i.add({type:"variableName",tags:["ui"],init:function(e){var t=e.variableType;e._createNewReference=function(){var a,n,o,r={value:(n=i.getReferencesByTag(e,t).map((function(e){return e.data.value})),o=0,n.forEach((function(e){var t;"thing"==e&&(t=1);var a=e.match(/thing\s(\d+)/);a&&(t=parseInt(a[1])),o<t&&(o=t)})),0==o?"thing":"thing "+(o+1)),color:(a=w[b],b=(b+1)%w.length,a)},l=i.createReference(e,t,r);e.setData("refID",l.id,!0),i.connectReference(e,l.id)};var a=e.getData("refID");if(a)i.connectReference(e,a);else{var n=i.getReferencesByTag(e,t);if(e.startWithExisting&&n.length>0)a=n[n.length-1].id,e.setData("refID",a,!0),i.connectReference(e,a);else e._createNewReference()}e._switchReference=function(t){var a=e.getData("refID");i.disconnectReference(e,a),e.setData("refID",t),i.connectReference(e,t)}},initWidget:function(e){e.dom=document.createElement("span");var t=e.getData("refID"),a=i.getReferenceById(e,t).data,n=e.addChild({type:"string",prefix:"[",suffix:"]",color:a.color},a),o=n.createWidget();e.dom.appendChild(o);var r=n.onDataChange;n.onDataChange=function(){r();var e=n.getData("color");n.stringUI.setColor(e)};var l=e.variableType;e.noChooser||(e.dom.onclick=function(){var t=[],a=i.getReferencesByTag(e,l),o=e.getData("refID");a.forEach((function(e){if(e.id!=o){var a=e.data.color;a=y(a[0],a[1],a[2]),t.push({label:"["+e.data.value+"]",value:e.id,color:a})}})),t.push({category:"meta",label:"(+new)",value:"NEW"}),t.push({category:"meta",label:"(change color)",value:"CHANGE_COLOR"}),i.modal.Chooser({source:e.dom,options:t,onchange:function(t){if("CHANGE_COLOR"==t)i.modal.Color({source:e.dom,value:n.getData("color"),onchange:function(e){n.setData("color",e),n.stringUI.setColor(e)}});else{if("NEW"==t){var a=e.getData("refID");i.disconnectReference(e,a),e._createNewReference(),e.update()}else e._switchReference(t);var o=e.getData("refID"),r=i.getReferenceById(e,o);n.switchData(r.data)}}})})},onget:function(e){var t=e.data.refID;return i.getReferenceById(e.actor,t).data.value},onkill:function(e){var t=e.getData("refID");i.disconnectReference(e,t)}}),i.module("math",(function(){i.modify("number","number_raw",(function(e){return{init:function(e){if(!e.noVariables){var t=e.getData("value");"number"==typeof t&&(e.setData("value",void 0,!0),e.setData("chain",[{type:"number_raw",value:t}],!0)),e._makeNewChainActor=function(t,a){var n,o=t.type,r={};switch((void 0===a?0==e.chainActors.length:0==a)&&void 0!==e.options&&(r.min=e.options.min,r.max=e.options.max),o){case"number_raw":n=e.addChild({type:o,...r},t);break;case"variableName":n=e.addChild({type:o,variableType:"number",noChooser:!0},t);break;case"choose":n=e.addChild({type:o,options:[{label:"+",value:"+"},{label:"-",value:"-"},{label:"&times;",value:"*"},{label:"&divide;",value:"/"}],styles:["joy-math"]},t)}var i=e.getData("chain");return void 0!==a?(e.chainActors.splice(a,0,n),i.splice(a,0,t)):(e.chainActors.push(n),i.push(t)),n},e.chainActors=[];var a=e.getData("chain"),n=l(a);a.splice(0,a.length);for(var o=0;o<n.length;o++)e._makeNewChainActor(n[o]);e._replaceChainActor=function(t,a){var n=e._deleteChainActor(t),o=e._makeNewChainActor(a,n);return e.update(),o},e._deleteChainActor=function(t){var a=e.chainActors.indexOf(t);return s(e.chainActors,t),e.removeChild(t),e.getData("chain").splice(a,1),a}}},initWidget:function(t){if(t.noVariables)e.initWidget(t);else{t.dom=document.createElement("span"),t.dom.className="joy-number";t._chainEntries=[],t._makeChainEntry=function(e,n){var o,r,l=document.createElement("span");if(e.createWidget(),l.appendChild(e.dom),"choose"!=e.type){var c,s=new i.ui.Button({onclick:function(){a(c)},styles:["joy-more"]});l.appendChild(s.dom)}if(void 0!==n)if(n<t.dom.childNodes.length){var d=t.dom.childNodes[n];t.dom.insertBefore(l,d)}else t.dom.appendChild(l);else t.dom.appendChild(l);"choose"!=e.type&&((o=e).dom.addEventListener("mousedown",(function(){r=+new Date})),o.dom.addEventListener("mouseup",(function(){+new Date-r<500&&function(e){var a=[];if("number_raw"!=e.type){var n=t.placeholder.value;"number"==typeof n&&a.push({label:n,value:{type:"number_raw",value:n}})}var o,r=i.getReferencesByTag(t,"number");"variableName"==e.type&&(o=e.getData("refID")),r.forEach((function(e){if(e.id!=o){var t=e.data.color;t=y(t[0],t[1],t[2]),a.push({label:"["+e.data.value+"]",value:{type:"variableName",refID:e.id},color:t})}})),a.length>0&&i.modal.Chooser({source:e.dom,options:a,onchange:function(a){var n=t._replaceChainActor(e,a);t._replaceChainEntry(e,n)}})}(o)}))),c={widget:l,actor:e},void 0!==n?t._chainEntries.splice(n,0,c):t._chainEntries.push(c)},t._deleteChainEntry=function(e){var a=t._chainEntries.find((function(t){return t.actor==e})),n=t._chainEntries.indexOf(a),o=a.widget;return t.dom.removeChild(o),s(t._chainEntries,a),n},t._replaceChainEntry=function(e,a){var n=t._deleteChainEntry(e);t._makeChainEntry(a,n)};for(var a=function(e){var a=e.widget.innerText,n=[{label:a+" + 2",value:"+"},{label:a+" - 2",value:"-"},{label:a+" &times; 2",value:"*"},{label:a+" &divide; 2",value:"/"}],o=t._chainEntries.indexOf(e);if(t._chainEntries.length>1){var r,l;r=0==o?o+1:o-1;var c=t._chainEntries[r].widget.innerText;l=0==o?a+" "+c:c+" "+a;var s=[o,r].sort();n.push({category:"meta",label:"(delete “"+l+"”)",value:s})}i.modal.Chooser({source:e.widget,options:n,onchange:function(a){if("string"==typeof a){var n=t._chainEntries.indexOf(e);n++;var o=t._makeNewChainActor({type:"choose",value:a},n);t._makeChainEntry(o,n),n++;var r=t._makeNewChainActor({type:"number_raw",value:2},n);t._makeChainEntry(r,n)}else for(var i=a,l=i.length-1;l>=0;l--){var c=i[l],s=t._chainEntries[c].actor;t._deleteChainActor(s),t._deleteChainEntry(s)}t.update()}})},n=0;n<t.chainActors.length;n++){var o=t.chainActors[n];t._makeChainEntry(o)}}},onget:function(t){if(t.actor.noVariables)return e.onget(t);for(var a=[],n=0;n<t.data.chain.length;n+=2){var o,r=t.actor.chainActors[n];switch(r.type){case"number_raw":o=r.get(t.target);break;case"variableName":o=t.target._variables[r.get(t.target)]}if(n>0){var i=t.actor.chainActors[n-1].get();a.push(i)}a.push(o)}for(n=1;n<a.length;n+=2){if("*"==(i=a[n])||"/"==i){var l=a[n-1],c=a[n+1];s="*"==i?l*c:l/c,a.splice(n-1,3,s),n-=2}}for(n=1;n<a.length;n+=2){if("+"==(i=a[n])||"-"==i){var s;l=a[n-1],c=a[n+1];s="+"==i?l+c:l-c,a.splice(n-1,3,s),n-=2}}return a[0]}}})),i.add({name:"Set [number]",type:"math/set",tags:["math","action"],init:"Set {id:'varname', type:'variableName', variableType:'number'} to {id:'value', type:'number'}",onact:function(e){e.target._variables[e.data.varname]=e.data.value}}),i.add({name:"Do math to [number]",type:"math/operation",tags:["math","action"],init:JSON.stringify({id:"operation",type:"choose",placeholder:"+",options:[{label:"+ Increase",value:"+"},{label:"- Decrease",value:"-"},{label:"&times; Multiply",value:"*"},{label:"&divide; Divide",value:"/"}]})+" {id:'varname', type:'variableName', variableType:'number', startWithExisting:true} by {id:'value', type:'number'}",onact:function(e){var t=e.target._variables,a=e.data.varname;switch(void 0===t[a]&&(t[a]=0),e.data.operation){case"+":t[a]+=e.data.value;break;case"-":t[a]-=e.data.value;break;case"*":t[a]*=e.data.value;break;case"/":t[a]/=e.data.value}}}),i.add({name:"If [math] then...",type:"math/if",tags:["math","action"],init:"If {id:'value1', type:'number'} {id:'test', type:'choose', options:['<','≤','=','≥','>'], placeholder:'='} {id:'value2', type:'number'}, then: {id:'actions', type:'actions', resetVariables:false}",onact:function(e){var t,a=e.data.value1,n=e.data.value2;switch(e.data.test){case"<":t=a<n;break;case"≤":t=a<=n;break;case"=":t=a==n;break;case"≥":t=a>=n;break;case">":t=a>n}if(t){var o=e.actor.actions.act(e.target);if("STOP"==o)return o}}})})),i.module("random",(function(){i.add({name:"With a X% chance...",type:"random/if",tags:["random","action"],init:"With a {id:'chance', type:'number', min:0, max:100, placeholder:50}% chance, do:{id:'actions', type:'actions', resetVariables:false}",onact:function(e){var t=e.data.chance/100;if(Math.random()<t){var a=e.actor.actions.act(e.target);if("STOP"==a)return a}}}),i.add({name:"Set random [number]",type:"random/set",tags:["random","action"],init:"Set {id:'varname', type:'variableName', variableType:'number'} to a random {id:'numtype', type:'choose', options:['number','integer'], placeholder:'number'} between {id:'min', type:'number', placeholder:1} and {id:'max', type:'number', placeholder:100}",onact:function(e){var t,a=e.target._variables,n=e.data.varname,o=e.data.min,r=e.data.max,i=Math.min(o,r),l=Math.max(o,r);t="integer"==e.data.numtype?i+Math.floor(Math.random()*(l-i+1)):i+Math.random()*(l-i),a[n]=t}})}));var _=i}));var o=n("kQXSw");window.addEventListener("load",(e=>{new r([{name:"solid fill",dropdownName:"Solid Fill",category:"Backgrounds",init:"Fill with {id:'color', type:'color', placeholder:[50, 0.8, 1.0]} and {id: 'whatever', type:'list'}",cursor:"./assets/cursors/fill-drip-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.addFill(e.data.color)}},{name:"gradient",dropdownName:"Gradient",category:"Backgrounds",init:"Gradient from {id:'color1', type:'color', placeholder:[50, 0.8, 1.0]} to {id:'color2', type:'color', placeholder:[100, 0.8, 1.0]}",cursor:"./assets/cursors/fill-drip-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.gradient(e.data.color1,e.data.color2)}},{name:"stripes",dropdownName:"Stripes",category:"Backgrounds",init:"Stripes {id:'something', type:'motif/solid fill'} of width {id:'stripeWidth', type:'number', min:1, max:300, placeholder:50}\n\t\t\t\tfrom {id:'color1', type:'color', placeholder:[0, 0.7, 0.8]} \n\t\t\t\tto {id:'color2', type:'color', placeholder:[200, 0.7, 0.9]}",cursor:"./assets/cursors/fill-drip-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.stripes(e.data.stripeWidth,e.data.color1,e.data.color2)}},{name:"circle",dropdownName:"Circle",category:"Shapes",init:"Circle of radius {id:'radius', type:'number', min:1, max:600, placeholder:20} in color {id:'color', type:'color', placeholder:[20, 0.8, 1.0]}  \n\t\t\tat ({id:'x', type:'number', placeholder:200}, {id:'y', type:'number', placeholder:200})",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.addCircle(e.data.color,e.data.x,e.data.y,e.data.radius)}},{name:"square",dropdownName:"Square",category:"Shapes",init:"Square of size {id:'size', type:'number', min:1, max:600, placeholder:40} in color {id:'color', type:'color', placeholder:[20, 0.8, 1.0]}  \n\t\t\tat ({id:'x', type:'number', placeholder:200}, {id:'y', type:'number', placeholder:200})",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.addSquare(e.data.color,e.data.x,e.data.y,e.data.size)}},{name:"polygon",dropdownName:"Polygon",category:"Shapes",init:"Polygon with {id:'nsides', type:'number', placeholder:6} sides and radius {id:'radius', type:'number', placeholder:20} in color {id:'color', type:'color', placeholder:[20, 0.8, 1.0]}  \n\t\t\tat ({id:'x', type:'number', placeholder:200}, {id:'y', type:'number', placeholder:200})",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.polygon(e.data.color,e.data.x,e.data.y,e.data.radius,e.data.nsides)}},{name:"star",dropdownName:"Star",category:"Shapes",init:"Star with {id:'npoints', type:'number', placeholder:7} points, outer {id:'r1', type:'number', placeholder:20}, inner {id:'r2', type:'number', placeholder:10} in color {id:'color', type:'color', placeholder:[20, 0.8, 1.0]}  \n\t\t\tat ({id:'x', type:'number', placeholder:200}, {id:'y', type:'number', placeholder:200})",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.star(e.data.color,e.data.x,e.data.y,e.data.r1,e.data.r2,e.data.npoints)}},{name:"heart",dropdownName:"Heart",category:"Shapes",init:"Heart of size {id:'size', type:'number', placeholder:40} in color {id:'color', type:'color', placeholder:[20, 0.8, 1.0]}  \n\t\t\tat ({id:'x', type:'number', placeholder:200}, {id:'y', type:'number', placeholder:200})",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.heart(e.data.color,e.data.x,e.data.y,e.data.size)}},{name:"straight line",dropdownName:"straight line",category:"Brushes",init:"Straight line from ({id:'x1', type:'number', placeholder:100}, {id:'y1', type:'number', placeholder:100})\n\t\t\tto ({id:'x2', type:'number', placeholder:200}, {id:'y2', type:'number', placeholder:200})\n\t\t\tin color {id:'color', type:'color', placeholder:[20, 0.8, 1.0]}\n\t\t\twith width {id: 'lineWidth', type: 'number', placeholder: 5}",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"drag",onact:e=>{e.target.addLine(e.data.color,e.data.lineWidth,e.data.x1,e.data.y1,e.data.x2,e.data.y2,e.data.radius)}},{name:"brush",dropdownName:"Brush",category:"Brushes",init:"Brush in {id:'color', type:'color', placeholder:[20, 0.8, 1.0]} with width {id: 'lineWidth', type: 'number', placeholder: 8} along path {id:'pointsList', type:'string', placeholder:'20,50,200,250'}",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"drag",onact:e=>{e.target.addBrushStroke(e.data.color,e.data.lineWidth,e.data.pointsList)}},{name:"rainbow brush",dropdownName:"Rainbow Brush",category:"Brushes",init:"Rainbow brush with points {id:'pointsList', type:'string', placeholder:'20,50,200,250'}",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"drag",onact:e=>{e.target.addBrushStroke(e.data.pointsList)}},{name:"swirl",dropdownName:"Swirl",category:"Effects",init:"Add swirl of radius {id:'radius', type:'number', placeholder:20} in color {id:'color', type:'color', placeholder:[20, 0.8, 1.0]}  \n\t\t\tat ({id:'x', type:'number', placeholder:200}, {id:'y', type:'number', placeholder:200})",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.addCircle(e.data.color,e.data.x,e.data.y,e.data.radius)}},{name:"invert",dropdownName:"Invert",category:"Effects",init:"Color shift of type {id:'filter', type:'choose', options:['invert','threshold', 'gray', 'dilate', 'blur'], placeholder:'invert'}",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.applyFilter(e.data.filter)}},{name:"grayscale",dropdownName:"Grayscale",category:"Effects",init:"Color shift of type {id:'filter', type:'choose', options:['invert','threshold', 'gray', 'dilate', 'blur'], placeholder:'gray'}",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.applyFilter(e.data.filter)}},{name:"threshold",dropdownName:"Threshold",category:"Effects",init:"Color shift of type {id:'filter', type:'choose', options:['invert','threshold', 'gray', 'dilate', 'blur'], placeholder:'threshold'}",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.applyFilter(e.data.filter)}},{name:"grid",dropdownName:"grid",category:"Patterns",init:"Repeat in grid with rows and columns",cursor:"./assets/cursors/star-solid.svg",mouseActionType:"single-click",onact:e=>{e.target.addCircle(e.data.color,e.data.x,e.data.y,e.data.radius)}}])}));class r{constructor(e){this.effects=this.reindex(e,"name"),this.sketch=this.initP5(),this.sketch.addFill("#aaaaaa"),this.sketch.clear("#aaaaaa"),this.joy=this.initJoy(),this.initUI(),this.joy.actions.addAction("stencils/paperdoll",void 0,{}),this.joy.actions.update()}initP5(){return new p5((e=>{let t=null;e.setup=()=>{e.createCanvas(600,600),e.background(255),e.setupFinished=!0,e.noLoop()},e.draw=()=>{t&&t.renderLine(e,0,5)},e.clear=()=>{e.setupFinished&&e.background(255)},e.addCircle=(t,a,n,o)=>{e.setupFinished&&(e.fill(t),e.noStroke(),e.circle(a,n,2*o))},e.addSquare=(t,a,n,o)=>{e.push(),e.rectMode(e.CENTER),e.fill(t),e.noStroke(),e.rect(a,n,o,o),e.pop()},e.addFill=t=>{e.setupFinished&&(e.fill(t),e.noStroke(),e.rect(0,0,e.width,e.height))},e.star=(t,a,n,o,r,i)=>{if(!e.setupFinished)return;let l=e.TWO_PI/i,c=l/2;e.fill(t),e.noStroke(),e.beginShape();for(let t=0;t<e.TWO_PI;t+=l){let i=a+e.cos(t)*r,l=n+e.sin(t)*r;e.vertex(i,l),i=a+e.cos(t+c)*o,l=n+e.sin(t+c)*o,e.vertex(i,l)}e.endShape(e.CLOSE)},e.polygon=(t,a,n,o,r)=>{if(!e.setupFinished)return;r=Math.abs(r),e.fill(t),e.noStroke();let i=e.TWO_PI/r;e.beginShape();for(let t=0;t<e.TWO_PI;t+=i){let r=a+e.cos(t)*o,i=n+e.sin(t)*o;e.vertex(r,i)}e.endShape(e.CLOSE)},e.gradient=(t,a)=>{if(!e.setupFinished)return;let n=e.color(t),o=e.color(a);e.noFill(),e.strokeWeight(1);for(let t=0;t<e.height;t++)e.stroke(e.lerpColor(n,o,t/e.height)),e.line(0,t,e.width,t)},e.stripes=(t,a,n)=>{if(!e.setupFinished)return;e.push(),e.translate(0,t/2);let o=e.color(a),r=e.color(n);e.noFill(),e.strokeWeight(t);for(let a=0;a<e.height;a+=t){let n=e.lerpColor(o,r,a/(e.height-t));console.log(n),e.stroke(n),e.line(0,a,e.width,a)}e.pop()},e.heart=(t,a,n,o)=>{e.setupFinished&&(e.push(),e.translate(0,-o/2),e.fill(t),e.noStroke(),e.beginShape(),e.vertex(a,n),e.bezierVertex(a-o/2,n-o/2,a-o,n+o/3,a,n+o),e.bezierVertex(a+o,n+o/3,a+o/2,n-o/2,a,n),e.endShape(e.CLOSE),e.pop())},e.applyFilter=t=>{e.filter(e[t.toUpperCase()])},e.stencil=(e,t)=>{},e.startPoints=(a,n)=>{t=new i(a,n),console.log("inside start points function",t),e.loop()},e.addPoint=(e,a)=>{t.addPoint(e,a)},e.endPoints=()=>{t=null,e.noLoop()},e.getPoint=e=>t.points[e],e.getLastPoint=()=>t.points[t.points.length-1],e.pointsAsString=()=>t.toString(),e.mouseDragged=()=>{t&&e.addPoint(e.mouseX,e.mouseY)},e.addLine=(t,a,n,o,r,i)=>{e.setupFinished&&(e.strokeWeight(a),e.noFill(),e.stroke(t),e.line(n,o,r,i))},e.addBrushStroke=(t,a,n)=>{if(!e.setupFinished)return;e.push(),e.noFill(),e.strokeWeight(a),e.stroke(t),e.strokeJoin(e.ROUND);let o=n.split(",");e.beginShape();for(let t=0;t<o.length-1;t+=2)e.vertex(o[t],o[t+1]);e.endShape(),e.pop()}}),"drawing-canvas")}initUI(){this.categories=[...new Set(Object.values(this.effects).map((e=>e.category)))];let e=document.getElementsByClassName("category-toolbar")[0],t=document.getElementsByClassName("drawing-toolbar")[0];this.categories.forEach((a=>{let n=this.createButton(a,a,["category-button"]);e.appendChild(n);let o=this.createDiv(a+"-buttons",[a+"-buttons","category-drawing-tools"]);t.appendChild(o),o.classList.add("hidden"),Object.values(this.effects).filter((e=>e.category===a)).map((e=>e.name)).forEach((e=>{let t=this.createButton(e,e+"-button",["effect-button"]);o.appendChild(t),t.addEventListener("click",(t=>{this.markSelectedById("effect-button",e+"-button")}))})),n.addEventListener("click",(e=>{this.markSelectedById("category-button",e.target.id),document.getElementsByClassName("category-drawing-tools").forEach((e=>{e.classList.add("hidden")})),o.classList.remove("hidden"),this.markSelectedById("effect-button",o.firstChild.id)}))}));let a=!1,n=!1;document.getElementById("drawing-canvas").addEventListener("mousedown",(e=>{a=!1,n=!0;let t=this.getSelectedEffect();t&&("drag"==this.effects[t].mouseActionType?(this.sketch.set,this.sketch.startPoints(this.sketch.mouseX,this.sketch.mouseY)):this.addEvent(t,{x:{type:"number",value:Math.round(this.sketch.mouseX)},y:{type:"number",value:Math.round(this.sketch.mouseY)}}))})),document.getElementById("drawing-canvas").addEventListener("mousemove",(e=>{n&&(a=!0)})),document.getElementById("drawing-canvas").addEventListener("mouseup",(e=>{n=!1;let t=this.getSelectedEffect();t&&"drag"==this.effects[t].mouseActionType&&(this.sketch.addPoint(this.sketch.mouseX,this.sketch.mouseY),"straight line"==t?this.addEvent(t,{x1:{type:"number",value:Math.round(this.sketch.getPoint(0).x)},y1:{type:"number",value:Math.round(this.sketch.getPoint(0).y)},x2:{type:"number",value:Math.round(this.sketch.getLastPoint().x)},y2:{type:"number",value:Math.round(this.sketch.getLastPoint().y)}}):"brush"==t&&this.addEvent(t,{pointsList:{type:"number",value:this.sketch.pointsAsString()}}),this.sketch.endPoints())}))}addEvent(e,t){this.effects[e];t.color={type:"color",value:[360*Math.random(),.8,.8]},this.joy.actions.addAction("motif/"+e,void 0,t),this.joy.actions.update()}getSelectedEffect(){let e=document.querySelectorAll(".effect-button.selected:not(.hidden)");if(e.length>0){return e[0].value}return""}markSelectedById(e,t){document.getElementsByClassName(e).forEach((e=>{e.classList.remove("selected")})),document.getElementById(t).classList.add("selected")}createButton(e,t,a){let n=document.createElement("input");return n.setAttribute("type","button"),a.forEach((e=>{n.classList.add(e)})),n.setAttribute("value",e),n.setAttribute("id",t),n}createDiv(e,t){let a=document.createElement("div");return t.forEach((e=>{a.classList.add(e)})),a.setAttribute("id",e),a}reindex(e,t){let a={};return e.forEach((e=>{a[e[t]]=e})),a}initJoy(){let e=o.default.loadFromURL(),t=this.sketch,a=this.effects;return o.default.module("motif",(function(){Object.values(a).forEach((e=>{console.log(e),o.default.add({name:e.dropdownName,type:"motif/"+e.name,tags:["motif","action"],init:e.init,onact:e.onact})}))})),o.default.module("stencils",(function(){o.default.add({name:"Paper Doll",type:"stencils/paperdoll",tags:["stencils","action"],init:"Use stencil paper doll with clothing {id:'outfit', type:'choose', options:['dress','pants','shirt'], placeholder:'dress'}",onact:function(e){e.target.stencil("paperdoll",e.data.outfit)}})})),o.default.add({type:"list",tags:["ui"],initWidget:function(e){e.dom=document.createElement("div"),e.dom.innerHTML="hello i am a list i promise"},onget:function(e){return 3}}),(0,o.default)({container:"#joy",init:"To create my design: {id:'actions', type:'actions'} <hr> {type:'save'}",data:e,modules:["motif","instructions","stencils","math"],previewActions:!0,previewNumbers:!0,onupdate:function(e){t.clear(),e.actions.act(t)}})}}class i{constructor(e,t){this.points=[],this.addPoint(e,t)}addPoint(e,t){this.points.push({x:e,y:t})}toString(){let e=[];return this.points.forEach((t=>{e.push(Math.round(t.x)),e.push(Math.round(t.y))})),e.toString()}renderPoints(e){e.push(),e.strokeWeight(5),e.noFill(),e.stroke(0),this.points.forEach((t=>{e.point(t.x,t.y)})),e.pop()}renderLine(e,t,a){e.push(),e.strokeWeight(a),e.stroke(t),e.noFill(),e.beginShape(),this.points.forEach((t=>{e.vertex(t.x,t.y)})),e.endShape(),e.pop()}}
//# sourceMappingURL=index.811a8eb3.js.map
